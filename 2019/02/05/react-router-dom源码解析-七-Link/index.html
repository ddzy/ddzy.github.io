<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <link rel="stylesheet" href="/style/style.css">
<script>
  var nlviconfig = {
    title: "DZY",
    author: "zhaoyang Duan",
    baseUrl: "/",
    theme: {
      scheme: "balance",
      lightbox: true,
      animate: true,
      search: false,
      friends: false,
      reward: false,
      lazy: true
    }
  }
</script>




    <link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">




    <link rel="icon" href="/favicon.ico" type="image/x-ico">







    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="DZY">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name="format-detection" content="telephone=no">
<meta name="keywords" content="nlvi, Nlvi">

  <link rel="apple-touch-icon" sizes="72x72" href="/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/favicon.ico">


  <meta name="subtitle" content="å¤§ä¸‰è€çŒ«-frontender">


  <meta name="description" content="ä¸ªäººåšå®¢, è®°å½•frontendçš„ç‚¹ç‚¹æ»´æ»´">


  <meta name="keywords" content="åšå®¢ blog ä¸ªäººåšå®¢">


  <meta name="keywords" content="react, Nlvi">

  <title> react-router-domæºç è§£æ(ä¸ƒ) -Link Â· DZY </title>
</head>
<body>
  <div class="progress">
  <div class="progress-inner"></div>
</div>

  

  <div class="container" style="display:none;">

    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn">
    <span><a href="/">DZY</a></span>
    
      <span id="subtitle">å¤§ä¸‰è€çŒ«-frontender</span>
    
  </div>
</div>
    <nav class="main-nav">
  
  <ul class="main-nav-list syuanpi tvIn">
  
  
    
      
    
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">æ–‡ç« </span>
        
          <span class="menu-item-label">article</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/categories" id="categories">
        <span class="base-name">åˆ†ç±»</span>
        
          <span class="menu-item-label">categories</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">å½’æ¡£</span>
        
          <span class="menu-item-label">archives</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">æ ‡ç­¾</span>
        
          <span class="menu-item-label">tags</span>
        
      </a>
    </li>
  
  </ul>
  
</nav>

    
    
      <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
  <div class="tagcloud-inner">
    <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/vscode/" style="font-size: 14px;">vscode</a> <a href="/tags/webpack/" style="font-size: 14px;">webpack</a> <a href="/tags/ä¸ƒç‰›äº‘/" style="font-size: 14px;">ä¸ƒç‰›äº‘</a> <a href="/tags/æ¯•è®¾/" style="font-size: 14px;">æ¯•è®¾</a>
  </div>
</div>

  
  <aside class="post-toc">
    <span class="title" id="toc-switch"><span>æ–‡ç« å¯¼èˆª</span></span>
    <div class="toc-inner syuanpi back-1" style="display:none;">
      <li class="title-link"><a href="javascript:;" class="toTop">react-router-domæºç è§£æ(ä¸ƒ) -Link</a></li>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»†è¯´"><span class="toc-text">ç»†è¯´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®è·µ"><span class="toc-text">å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®šä¹‰interface"><span class="toc-text">å®šä¹‰interface</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æµ‹è¯•"><span class="toc-text">æµ‹è¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æºç "><span class="toc-text">æºç </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-text">æ€»ç»“</span></a></li></ol>
    </div>
  </aside>


  
    
  </div>
</header>
<div class="mobile-header">
  <div class="mobile-header-body">
    <div class="mobile-header-list">
      
        
            <div class="mobile-nav-item">
                <a href="/">
                    <span>æ–‡ç« </span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/categories">
                    <span>åˆ†ç±»</span>
                    
                        <span class="menu-item-label">categories</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/archives">
                    <span>å½’æ¡£</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </div>
        
      
        
          <div class="mobile-nav-item inner-cloud">
            <div class="mobile-nav-tag">
              <a href="javascript:;" id="mobile-tags">
                <span>æ ‡ç­¾</span>
                
                    <span class="menu-item-label">tags</span>
                
              </a>
            </div>
            <div class="mobile-nav-tagcloud">
              <div class="mobile-tagcloud-inner">
                <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/vscode/" style="font-size: 14px;">vscode</a> <a href="/tags/webpack/" style="font-size: 14px;">webpack</a> <a href="/tags/ä¸ƒç‰›äº‘/" style="font-size: 14px;">ä¸ƒç‰›äº‘</a> <a href="/tags/æ¯•è®¾/" style="font-size: 14px;">æ¯•è®¾</a>
              </div>
            </div>
          </div>
        
      
    </div>
  </div>
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <span class="header-menu-line"></span>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">DZY</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
</div>
    <div class="container-inner">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi fadeInUpShort back-1">
        <div class="post-time-wrapper">
          <span>2019-02-05</span>
          
            
              <span class="post-category"><a href="/categories/frontend/">frontend</a></span>
            
          
          
            
              <aside class="post-tags syuanpi fadeInUpShort back-3">
              
                <a href="/tags/react/">react</a>
              
              </aside>
            
          
        </div>
      </div>
      <h1 class="post-title syuanpi fadeInUpShort back-2">
        
          react-router-domæºç è§£æ(ä¸ƒ) -Link
        
      </h1>
    </header>
    <div class="post-content syuanpi fadeInUpShort back-3">
      
        <p>Happy New Year!</p>
<a id="more"></a>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><strong>å‰è¨€</strong></h2><hr>
<p>ç»™è‡ªå·±æ‹œä¸ªæ—©å¹´, ç¥è‡ªå·±åœ¨2019å¹´:</p>
<ul>
<li>å‰ç«¯æŠ€æœ¯å¤§æœ‰é•¿è¿›</li>
<li>åƒé¥­å¤šå¤š</li>
<li>æ‰¾ä¸ªå¥½å·¥ä½œ</li>
</ul>
<p><img src="https://oos.blog.yyge.top/2019/2/5/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E4%B8%83%29%20-Link/images/1.jpg?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="è¿‡å¹´å¥½, ç–¯ç‹‚æš—ç¤º"></p>
<p>æ—©ä¸Š7ç‚¹èµ·æ¥, æœ¦æœ¦èƒ§èƒ§, ååœ¨ç”µè„‘æ¡Œå‰, ä¸€è„¸æ‡µé€¼â€¦</p>
<p>æƒ³äº†æƒ³, ä»Šå¤©è¿˜æ˜¯ç»§ç»­ä¹‹å‰çš„æºç å­¦ä¹ å§, ä¸Šä¸€æ¬¡å­¦ä¹ äº†<code>Switch</code>ç»„ä»¶, ä»Šå¤©ä¸»è¦æ˜¯æ¥çœ‹ä¸€ä¸‹<code>Link</code>.</p>
<h2 id="ç»†è¯´"><a href="#ç»†è¯´" class="headerlink" title="ç»†è¯´"></a><strong>ç»†è¯´</strong></h2><hr>
<p><code>Link</code>ç»„ä»¶è¢«æ”¾ç½®åœ¨<code>packages</code>ä¸‹çš„<code>react-router-dom</code>åŒ…ä¸­, ä¸<code>react-router</code>åšäº†éš”ç¦»,</p>
<blockquote>
<p>è™½ç„¶ä¸çŸ¥é“ä½œè€…è¿™ä¹ˆåšçš„æ„å›¾, ä½†æ˜¯ä½©æœå°±å¯¹äº†</p>
</blockquote>
<p>ä½†è¿™äº›éƒ½æ˜¯æ¬¡è¦çš„, æ‰“å¼€<code>Link.js</code>æ–‡ä»¶, é¢„è§ˆä¸€ä¸‹å¤§è‡´çš„ç»“æ„, å¯ä»¥çœ‹åˆ°, æºç è¡Œæ•°ä¸<code>Switch</code>å¹¶æ— ä¸¤æ ·, ä»”ç»†çœ‹, <code>Link</code>ç±»ä¸­, å…¶å®åªæœ‰ä¸€ä¸ª<code>handleClick</code>å¤„ç†æ–¹æ³•. æ‰€ä»¥, æŒ‰ç†è¯´, å¹¶ä¸åº”è¯¥å¾ˆéš¾ç†è§£:</p>
<p><img src="https://oos.blog.yyge.top/2019/2/5/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E4%B8%83%29%20-Link/images/2.gif?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="ç–¯ç‹‚æš—ç¤º_åŠ¨å›¾"></p>
<p>æ­£å¼å¼€å§‹åˆ†æä¹‹å‰, å…ˆæ¥å›æƒ³ä¸€ä¸‹ä½¿ç”¨æ€è·¯? å¹³æ—¶ç”¨åˆ°æœ€å¤šçš„å¯èƒ½å°±æ˜¯<code>Link</code>äº†, ä¸€èˆ¬éƒ½æ˜¯åš<code>Menu</code>ç‚¹å‡»è·³è½¬ä¹‹ç±»çš„, ä¸ä¹‹åŠŸèƒ½ç±»ä¼¼çš„æœ‰ä¸€ä¸ª<code>history.push</code>, ä¸¤è€…åŠŸèƒ½å·®ä¸å¤š. ä¸<code>Link</code>å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ª<code>NavLink</code>, å¯ä»¥è‡ªå®šä¹‰<code>active</code>æ ·å¼, è¿™ä¸ªä¸‹ä¸€ç¯‡å†è¯´å§.</p>
<blockquote>
<p><code>Link</code>ç‚¹å‡»è·³è½¬, <code>url</code>æ”¹å˜, å¯¹åº”<code>æ¨¡å—</code>å±•ç°, ä¸€æ°”å‘µæˆ.</p>
</blockquote>
<p>å¸¦ç€è¿™ä¸ªæƒ³æ³•, å¼€å§‹é˜…è¯»æºç :</p>
<p>é¦–å…ˆ, å¯ä»¥çœ‹åˆ°:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;RouterContext.Consumer&gt;</span><br><span class="line">    &#123;...&#125;</span><br><span class="line">  &lt;RouterContext.Consumer&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>è¿˜æ˜¯ç†Ÿæ‚‰çš„åšæ³•, æ¥æ”¶<code>context</code>åšå†…éƒ¨æ“ä½œ.</p>
<p>æ¥ç€:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> location =</span><br><span class="line">  <span class="keyword">typeof</span> to === <span class="string">"string"</span></span><br><span class="line">    ? createLocation(to, <span class="literal">null</span>, <span class="literal">null</span>, context.location)</span><br><span class="line">    : to;</span><br><span class="line"><span class="keyword">const</span> href = location ? context.history.createHref(location) : <span class="string">""</span>;</span><br></pre></td></tr></table></figure>
<p>åˆ†ä¸ºä¸¤æ­¥</p>
<ul>
<li>è®¡ç®—location</li>
<li>æ ¹æ®locationè®¡ç®—href</li>
</ul>
<p>æ ¹æ®<code>props</code>ä¼ é€’çš„<code>to</code>å‚æ•°, å¦‚æœæ˜¯<code>string</code>, åˆ™è°ƒç”¨<code>history.push</code>ç›´æ¥è·³è½¬, å¦‚æœæ˜¯<code>object</code>, åˆ™ä½¿ç”¨<code>history.createHref</code>è¿›è¡ŒåŒ…è£…, å¹¶è¿”å›ç›¸åº”çš„<code>path</code>.</p>
<p>æ¥ç€, å†å¾€ä¸‹çœ‹:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;a</span><br><span class="line">    ...</span><br><span class="line">    onClick=&#123;<span class="function"><span class="params">event</span> =&gt;</span> <span class="keyword">this</span>.handleClick(event, context.history)&#125;</span><br><span class="line">    ...</span><br><span class="line">  &gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><code>Link</code>çš„æ ¸å¿ƒå¤„ç†å‡½æ•°, <code>vscode</code>ä¸­<code>Ctrl+MouseLeft</code>ç›´æ¥è¿›å…¥<code>handleClick</code>å‡½æ•°å†…éƒ¨, å¯ä»¥çœ‹åˆ°:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">handleClick(event, history) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.props.onClick) <span class="keyword">this</span>.props.onClick(event);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    !event.defaultPrevented &amp;&amp; <span class="comment">// onClick prevented default</span></span><br><span class="line">    event.button === <span class="number">0</span> &amp;&amp; <span class="comment">// ignore everything but left clicks</span></span><br><span class="line">    (!<span class="keyword">this</span>.props.target || <span class="keyword">this</span>.props.target === <span class="string">"_self"</span>) &amp;&amp; <span class="comment">// let browser handle "target=_blank" etc.</span></span><br><span class="line">    !isModifiedEvent(event) <span class="comment">// ignore clicks with modifier keys</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> method = <span class="keyword">this</span>.props.replace ? history.replace : history.push;</span><br><span class="line"></span><br><span class="line">    method(<span class="keyword">this</span>.props.to);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æºç æ‰€ç¤º, ä¸‹é¢å°†ç›¸å…³æ³¨è§£ç›´æ¥æŒ‚è½½åˆ°å¯¹åº”æºç ä¸Š:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">handleClick(event, history) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.props.onClick) <span class="keyword">this</span>.props.onClick(event);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="comment">// ** å¦‚æœé»˜è®¤äº‹ä»¶å·²è¢«é˜»æ­¢ **</span></span><br><span class="line">    <span class="comment">// ** é¿å…innerRefç›´æ¥æ“ä½œaé“¾æ¥ **</span></span><br><span class="line">    !event.defaultPrevented &amp;&amp;</span><br><span class="line">    <span class="comment">// ** åªå…è®¸é¼ æ ‡å·¦é”®ç‚¹å‡» **</span></span><br><span class="line">    event.button === <span class="number">0</span> &amp;&amp;</span><br><span class="line">    <span class="comment">// ** æ’é™¤å½“target=_blankæ—¶, æ‰“å¼€æ–°é¡µé¢, ç ´åå•é¡µåŸåˆ™ **</span></span><br><span class="line">    (!<span class="keyword">this</span>.props.target || <span class="keyword">this</span>.props.target === <span class="string">"_self"</span>) &amp;&amp;</span><br><span class="line">    <span class="comment">// ** é¿å…ä½¿ç”¨é”®ç›˜å¿«æ·é”®+é¼ æ ‡çš„æ“ä½œ **</span></span><br><span class="line">    <span class="comment">// ** å½¢å¦‚ Ctrl + MouseLeft, ä¼šåœ¨æ–°é¡µé¢æ‰“å¼€é“¾æ¥ **</span></span><br><span class="line">    !isModifiedEvent(event)</span><br><span class="line">  ) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ** é€šè¿‡ replace åˆ¤æ–­æ˜¯å¦å°†å½“å‰locationæ›¿æ¢ä¸ºæ–°çš„location **</span></span><br><span class="line">    <span class="comment">// ** é¿å…å †æ ˆ **</span></span><br><span class="line">    <span class="keyword">const</span> method = <span class="keyword">this</span>.props.replace ? history.replace : history.push;</span><br><span class="line"></span><br><span class="line">    method(<span class="keyword">this</span>.props.to);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œè¿™ä¸€æ­¥æ“ä½œ, åŸºæœ¬ä¸Š<code>Link</code>çš„æ ¸å¿ƒå·²ç»å­¦ä¹ å®Œæ¯•äº†, æ„Ÿè§‰å¾ˆç®€å•, è¿™ä¹Ÿè®¸æ˜¯æ•´ä¸ª<code>react-router-dom</code>ä½“ç³»ä¸­æœ€ç®€å•çš„ä¸€ä¸ª(å“¦, è¿˜æœ‰ä¸‹ä¸€ç¯‡å°†è¦åˆ†æçš„<code>NavLink</code>).</p>
<blockquote>
<p>å¤šè¯´ä¸åšéå›å­</p>
</blockquote>
<p>ä¸‹é¢, æ¥ç€æ¥å®Œå–„è‡ªå·±çš„<code>yyg-react-router-dom</code>åº“.</p>
<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a><strong>å®è·µ</strong></h2><hr>
<p>è¿™é‡Œåªå†™ä¸ªå¤§æ¦‚, å®Œæ•´æºç å‚è€ƒ: <a href="#æºç ">è¿™é‡Œ</a></p>
<h3 id="å®šä¹‰interface"><a href="#å®šä¹‰interface" class="headerlink" title="å®šä¹‰interface"></a><strong>å®šä¹‰interface</strong></h3><blockquote>
<p>éå¸¸é‡è¦çš„ä¸€æ­¥, æœ¬èƒ½ååº”</p>
</blockquote>
<p>æ‰“å¼€<code>react-router</code>çš„<a href="https://reacttraining.com/react-router/web/api/Link" target="_blank" rel="noopener">å®˜ç½‘</a>, å¯ä»¥çœ‹åˆ°<code>Link</code>çš„æ‰€éœ€props, ğŸ†—, ç°åœ¨æ¥å®šä¹‰å®ƒ:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/yyg-react-router-dom/components/Link.tsx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ILinkProps &#123;</span><br><span class="line">  to?: <span class="built_in">string</span> | LocationDescriptorObject&lt;&#123;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span>,</span><br><span class="line">  &#125;&gt;;</span><br><span class="line">  replace?: <span class="built_in">boolean</span>;</span><br><span class="line">  innerRef?: <span class="function">(<span class="params">node: React.Ref&lt;HTMLLinkElement&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  children?: React.ReactChildren;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€, æŒ‰ç…§ä»¥å‰çš„åˆ†å¸ƒç­–ç•¥, å°†å¤„ç†<code>context</code>çš„å‡½æ•°æå–å‡ºæ¥, å†åˆ†åˆ«è¿›è¡Œä¸åŒçš„å¤„ç†æ“ä½œ, å¤§è‡´ç»“æ„æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/yyg-react-router-dom/components/Link.tsx</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleProcess</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  context: IStaticRouterComponentParams,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">JSX</span>.<span class="title">Element</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ** do any **</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;RouterContext.Consumer&gt;</span><br><span class="line">  &#123;</span><br><span class="line">    (context) =&gt; handleProcess(context <span class="keyword">as</span> IStaticRouterComponentParams)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;RouterContext.Consumer&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåªæ˜¯å†ä¸‰æé†’è‡ªå·±æ³¨æ„ä»£ç è§„èŒƒ, ä¿—è¯è¯´:</p>
<blockquote>
<p>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´</p>
</blockquote>
<p>åšçš„å¤šäº†, è‡ªç„¶è€Œç„¶å°±ç†Ÿç»ƒäº†.</p>
<p>æ¥ç€, åœ¨<code>handleProcess</code>å‡½æ•°ä¸­, è¦è¿›è¡Œçš„åˆ™æ˜¯è®¡ç®—<code>href</code>, ä»¥åŠå¤„ç†<code>a</code>çš„<code>onClick</code>, æ‰€ä»¥æŒ‰ç…§ä¹‹å‰çš„æ€è·¯, æ ¹æ®<code>props.to</code>çš„å€¼è¿›è¡Œ<code>location</code>çš„è®¡ç®—, å¾—åˆ°<code>createHref</code>çš„è¿”å›å€¼, è¿™ä¸ªè¿”å›å€¼å°±æ˜¯<code>path</code>, æ‰€ä»¥:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/yyg-react-router-dom/components/Link.tsx</span></span><br><span class="line">...</span><br><span class="line">    <span class="keyword">const</span> href = (</span><br><span class="line">      to</span><br><span class="line">        ? _isString(to)</span><br><span class="line">          ? context.history.createHref(createLocation(to, <span class="literal">null</span>, <span class="string">''</span>, context.location))</span><br><span class="line">          : context.history.createHref(to <span class="keyword">as</span> LocationDescriptorObject&lt;&#123;</span><br><span class="line">              [key: <span class="built_in">string</span>]: <span class="built_in">any</span>,</span><br><span class="line">            &#125;&gt;)</span><br><span class="line">        : <span class="string">''</span></span><br><span class="line">    ) <span class="keyword">as</span> <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;a</span><br><span class="line">        &#123;...others&#125;</span><br><span class="line">        href=&#123;href&#125;</span><br><span class="line">        onClick=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> handleLinkClick(e, context, href, replace)&#125;</span><br><span class="line">      &gt;&#123;children&#125;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">...</span></span><br></pre></td></tr></table></figure>
<p>è®¡ç®—å®Œ<code>href</code>, å°±è¦å¤„ç†<code>click</code>äº†, å°†å…¶æå–è‡³ä¸¤ä¸€ä¸ªfunction, å¹¶ä¼ å…¥æ‰€éœ€çš„å‚æ•°:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleLinkClick</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  e: React.MouseEvent&lt;HTMLAnchorElement&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  context: IStaticRouteComponentParams,</span></span></span><br><span class="line"><span class="function"><span class="params">  href: <span class="built_in">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  replace?: <span class="built_in">boolean</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ** çœç•¥nä¸ªå­— **</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€å, åšæ•´åˆ, ä¼˜åŒ–ä¸€ä¸‹ä»£ç , å¼€å§‹<a href="#æµ‹è¯•">æµ‹è¯•ç¯èŠ‚</a></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a><strong>æµ‹è¯•</strong></h2><hr>
<p>ç®€å•çš„å†™å®Œè‡ªå·±çš„ä»£ç , ç®€å•èµ·è§, å¯¹<code>to</code>å’Œ<code>replace</code>è¿™ä¸¤ä¸ªå¸¸ç”¨å‚æ•°ä½œæµ‹è¯•:</p>
<p>åœ¨<code>App.tsx</code>ä¸­, ä¿®æ”¹æµ‹è¯•è·¯ç”±:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/App.tsx</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;BrowserRouter&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=&#123;<span class="string">"/test"</span>&#125;</span><br><span class="line">            render=&#123;<span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">              &lt;Switch&gt;</span><br><span class="line">                &lt;Route exact path=<span class="string">"/test"</span> component=&#123;One&#125; /&gt;</span><br><span class="line">                &lt;Route exact path=<span class="string">"/test/home"</span> component=&#123;Three&#125; /&gt;</span><br><span class="line">                &lt;Route exact path=<span class="string">"/test/product"</span> component=&#123;Four&#125; /&gt;</span><br><span class="line">              &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">            )&#125;</span></span><br><span class="line"><span class="regexp">          /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>BrowserRouter&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br></pre></td></tr></table></figure>
<p>è¿›å…¥åˆ°<code>One.tsx</code>ä¸­, æ·»åŠ ä¸€äº›å†…å®¹, å½“ç„¶æ˜¯<code>Link</code>ç»„ä»¶äº†:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/test/One.tsx</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Page One&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Link</span></span><br><span class="line"><span class="regexp">            to="/</span>test/home<span class="string">"</span></span><br><span class="line"><span class="string">          &gt;Home&lt;/Link&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;</span></span><br><span class="line"><span class="string">          &lt;Link</span></span><br><span class="line"><span class="string">            to=&#123;&#123;</span></span><br><span class="line"><span class="string">              pathname: '/test/product',</span></span><br><span class="line"><span class="string">              state: &#123;</span></span><br><span class="line"><span class="string">                id: '19980808',</span></span><br><span class="line"><span class="string">                name: 'duan',</span></span><br><span class="line"><span class="string">              &#125;,</span></span><br><span class="line"><span class="string">            &#125;&#125;</span></span><br><span class="line"><span class="string">          &gt;Product&lt;/Link&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  );</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç å¹¶ä¸æ˜¯å›ºå®šçš„, è‡ªå·±éšæ„æµ‹è¯•å³å¯â€¦</p>
<p>ä¹‹å, æ‰“å¼€<code>CentBrowser</code>, å¯ä»¥çœ‹åˆ°:</p>
<p><img src="https://oos.blog.yyge.top/2019/2/5/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E4%B8%83%29%20-Link/images/3.gif?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="entbrowseræµ‹è¯•"></p>
<p>é€šè¿‡ç‚¹å‡»ä½¿ç”¨<code>Link</code>ç»„ä»¶, æµè§ˆå™¨urlå¯ä»¥æ­£å¸¸æ”¹å˜, å¹¶ä¸”å¯¹åº”çš„ç»„ä»¶å¯ä»¥æ­£å¸¸æ¸²æŸ“, å……åˆ†è¯æ˜æˆ‘ä»¬è‡ªå·±å°è£…çš„Linkæ²¡æœ‰é—®é¢˜.</p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a><strong>æºç </strong></h2><hr>
<p>å®Œæ•´æºç å·²ä¸Šä¼ è‡³ <a href="https://github.com/ddzy/yyg-react-router-dom" target="_blank" rel="noopener">Gayhub</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><hr>
<p>æœ€å, ä»¥ä¸€å¼ è„‘å›¾æ¥ç»“æŸä»Šå¤©çš„å­¦ä¹ :</p>
<p><img src="https://oos.blog.yyge.top/2019/2/5/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E4%B8%83%29%20-Link/images/4.jpg?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="æ€ç»´è„‘å›¾"></p>

      
    
    </div>
    
      

      
  <hr class="copy-line">
  <div class="post-copyright">
    <div class="copy-author">
      <span>ä½œè€… :</span>
      <span>zhaoyang Duan</span>
    </div>
    <div class="copy-url">
      <span>åœ°å€ :</span>
      <a href="https://blog.yyge.top/2019/02/05/react-router-domæºç è§£æ-ä¸ƒ-Link/">https://blog.yyge.top/2019/02/05/react-router-domæºç è§£æ-ä¸ƒ-Link/</a>
    </div>
    <div class="copy-origin">
      <span>æ¥æº :</span>
      <a href="https://blog.yyge.top">https://blog.yyge.top</a>
    </div>
    <div class="copy-license">
      
      è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚
    </div>
  </div>

    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/2019/02/07/react-router-domæºç è§£æ-å…«-NavLink/" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>react-router-domæºç è§£æ(å…«) -NavLink
        </span>
      </a>
    
    
      <a href="/2019/01/31/vscodeæ’ä»¶å¼€å‘æ€»ç»“/" id="art-right" class="art-right">
        <span class="prev-title"> 
          vscodeæ’ä»¶å¼€å‘æ€»ç»“<i class="iconfont icon-right"></i>  
        </span>
      </a>
    
  </nav>

    
  <i id="com-switch" class="iconfont icon-more jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
  <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
    
    
    

    

  </div>



  
  


        </div>
      </main>

      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
    
    
    
    
    
    
    
    
    
        
        
        
        
            <a href="https://www.zhihu.com/people/bu-jing-tong-jsbu-zhao-dui-xiang-81/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
        
        
        
        
    
        
            <a href="https://github.com/ddzy" class="iconfont icon-social-github" title="github"></a>
        
        
        
        
        
        
        
        
    
</div>

    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2018 ~ 2019</span>
        <span>â¤</span>
        <span>zhaoyang Duan</span>
    </div>
    <div class="theme">
        <span>
            åŠ¨åŠ›æ¥æºäº
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            ä¸»é¢˜
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <span id="busuanzi_container_site_pv">
            æœ¬ç«™æ€»è®¿é—®é‡:
            <span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
    </div>
    
</div>

    </div>
  </div>
</footer>
    </div>
  </div>
  <script src="/script/lib/jquery/jquery-3.2.1.min.js"></script>


  <script src="/script/lib/lightbox/js/lightbox.min.js"></script>



  <script src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({tex2jax: {inlineMath: [["$","$"], ["\\(","\\)"]]}});</script>



  <script src="/script/lib/lazyload/lazyload.min.js"></script>




<script src="/script/src/nlvi.js"></script>

  <script src="/script/scheme/balance.js"></script>

<script src="/script/bootstarp.js"></script>


<div class="backtop syuanpi melt toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>



</body>
</html>
