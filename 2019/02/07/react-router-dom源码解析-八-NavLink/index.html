<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <link rel="stylesheet" href="/style/style.css">
<script>
  var nlviconfig = {
    title: "DZY",
    author: "zhaoyang Duan",
    baseUrl: "/",
    theme: {
      scheme: "balance",
      lightbox: true,
      animate: true,
      search: false,
      friends: false,
      reward: false,
      lazy: true
    }
  }
</script>




    <link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">




    <link rel="icon" href="/favicon.ico" type="image/x-ico">







    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="DZY">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name="format-detection" content="telephone=no">
<meta name="keywords" content="nlvi, Nlvi">

  <link rel="apple-touch-icon" sizes="72x72" href="/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/favicon.ico">


  <meta name="subtitle" content="å¤§ä¸‰è€çŒ«-frontender">


  <meta name="description" content="ä¸ªäººåšå®¢, è®°å½•frontendçš„ç‚¹ç‚¹æ»´æ»´">


  <meta name="keywords" content="åšå®¢ blog ä¸ªäººåšå®¢">


  <meta name="keywords" content="react, Nlvi">

  <title> react-router-domæºç è§£æ(å…«) -NavLink Â· DZY </title>
</head>
<body>
  <div class="progress">
  <div class="progress-inner"></div>
</div>

  

  <div class="container" style="display:none;">

    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn">
    <span><a href="/">DZY</a></span>
    
      <span id="subtitle">å¤§ä¸‰è€çŒ«-frontender</span>
    
  </div>
</div>
    <nav class="main-nav">
  
  <ul class="main-nav-list syuanpi tvIn">
  
  
    
      
    
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">æ–‡ç« </span>
        
          <span class="menu-item-label">article</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/categories" id="categories">
        <span class="base-name">åˆ†ç±»</span>
        
          <span class="menu-item-label">categories</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">å½’æ¡£</span>
        
          <span class="menu-item-label">archives</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">æ ‡ç­¾</span>
        
          <span class="menu-item-label">tags</span>
        
      </a>
    </li>
  
  </ul>
  
</nav>

    
    
      <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
  <div class="tagcloud-inner">
    <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/vscode/" style="font-size: 14px;">vscode</a> <a href="/tags/webpack/" style="font-size: 14px;">webpack</a> <a href="/tags/ä¸ƒç‰›äº‘/" style="font-size: 14px;">ä¸ƒç‰›äº‘</a> <a href="/tags/æ¯•è®¾/" style="font-size: 14px;">æ¯•è®¾</a>
  </div>
</div>

  
  <aside class="post-toc">
    <span class="title" id="toc-switch"><span>æ–‡ç« å¯¼èˆª</span></span>
    <div class="toc-inner syuanpi back-1" style="display:none;">
      <li class="title-link"><a href="javascript:;" class="toTop">react-router-domæºç è§£æ(å…«) -NavLink</a></li>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»†è¯´"><span class="toc-text">ç»†è¯´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®è·µ"><span class="toc-text">å®è·µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æµ‹è¯•"><span class="toc-text">æµ‹è¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æºç "><span class="toc-text">æºç </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-text">æ€»ç»“</span></a></li></ol>
    </div>
  </aside>


  
    
  </div>
</header>
<div class="mobile-header">
  <div class="mobile-header-body">
    <div class="mobile-header-list">
      
        
            <div class="mobile-nav-item">
                <a href="/">
                    <span>æ–‡ç« </span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/categories">
                    <span>åˆ†ç±»</span>
                    
                        <span class="menu-item-label">categories</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/archives">
                    <span>å½’æ¡£</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </div>
        
      
        
          <div class="mobile-nav-item inner-cloud">
            <div class="mobile-nav-tag">
              <a href="javascript:;" id="mobile-tags">
                <span>æ ‡ç­¾</span>
                
                    <span class="menu-item-label">tags</span>
                
              </a>
            </div>
            <div class="mobile-nav-tagcloud">
              <div class="mobile-tagcloud-inner">
                <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/vscode/" style="font-size: 14px;">vscode</a> <a href="/tags/webpack/" style="font-size: 14px;">webpack</a> <a href="/tags/ä¸ƒç‰›äº‘/" style="font-size: 14px;">ä¸ƒç‰›äº‘</a> <a href="/tags/æ¯•è®¾/" style="font-size: 14px;">æ¯•è®¾</a>
              </div>
            </div>
          </div>
        
      
    </div>
  </div>
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <span class="header-menu-line"></span>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">DZY</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
</div>
    <div class="container-inner">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi fadeInUpShort back-1">
        <div class="post-time-wrapper">
          <span>2019-02-07</span>
          
            
              <span class="post-category"><a href="/categories/frontend/">frontend</a></span>
            
          
          
            
              <aside class="post-tags syuanpi fadeInUpShort back-3">
              
                <a href="/tags/react/">react</a>
              
              </aside>
            
          
        </div>
      </div>
      <h1 class="post-title syuanpi fadeInUpShort back-2">
        
          react-router-domæºç è§£æ(å…«) -NavLink
        
      </h1>
    </header>
    <div class="post-content syuanpi fadeInUpShort back-3">
      
        <p>å‰å¤©å­¦ä¹ äº†<code>Link</code>ç»„ä»¶æºç , ä»Šå¤©å†æ¥çœ‹ä¸€ä¸‹ä¸ä¹‹ç›¸ä¼¼çš„<code>NavLink</code></p>
<a id="more"></a>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><strong>å‰è¨€</strong></h2><hr>
<p>ç»è¿‡ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://blog.yyge.top/2019/02/05/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-%E4%B8%83-Link">Link</a>çš„æˆ˜ç«æ´—ç¤¼, å¯ä»¥äº†è§£åˆ°, <code>Link</code>ä½œä¸ºæ²Ÿé€š<code>react-router</code>å’Œ<code>react</code>ä¹‹é—´çš„æ¡¥æ¢, ç»å†<code>click -&gt; urlå˜åŒ– -&gt; history(onListen) -&gt; Switch -&gt; Route render</code>çš„è¿‡ç¨‹, æ®æ­¤, æœ‰å…³<code>Link</code>çš„é¢è¯•é¢˜ä¾¿å¯è¿åˆƒè€Œè§£.</p>
<p>æ­£å¼å¼€å§‹åˆ†æä¹‹å‰, å…ˆæ¥å›æƒ³ä¸€ä¸‹æˆ‘ä»¬å¹³æ—¶æ˜¯å¦‚ä½•ä½¿ç”¨<code>NavLink</code>çš„?</p>
<blockquote>
<p>ä¼ å…¥å¯¹åº”çš„<code>activeStyle</code>æˆ–è€…<code>activeClass</code>, ç‚¹å‡»ä¹‹å, å¦‚æœå¯¹åº”çš„ç»„ä»¶æˆåŠŸæ¸²æŸ“, åˆ™è¯¥<code>NavLink</code>çš„æ ·å¼ä¹Ÿä¼šæ”¹å˜.</p>
</blockquote>
<p>å¸¦ç€å¹³æ—¶ä½¿ç”¨çš„æ€è·¯å»åˆ†ææºç , ä¼šåˆäº‹åŠåŠŸå€çš„æ•ˆæœ.</p>
<p>OK, æ­£å¼å¼€å§‹å¯¹<code>NavLink</code>çš„æ¢ç´¢.</p>
<h2 id="ç»†è¯´"><a href="#ç»†è¯´" class="headerlink" title="ç»†è¯´"></a><strong>ç»†è¯´</strong></h2><hr>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹<code>NavLink</code>çš„å¤§è‡´ç»“æ„, å¯ä»¥çœ‹åˆ°, å…¶å®<code>NavLink</code>æ˜¯ä¸€ä¸ª<code>functional</code>ç»„ä»¶, <code>functional</code>ç›¸è¾ƒäº<code>classes</code>çš„ä¼˜åŠ¿å¾ˆå¤š:</p>
<ul>
<li>é«˜åº¦å¯æ‹“å±•</li>
<li>æ˜“äºä¼˜åŒ–é‡æ„</li>
<li>æ¸²æŸ“æ€§èƒ½è¾ƒä¼˜</li>
</ul>
<p>åœ¨<code>react v16.7</code>ä¹‹åçš„<code>hooks</code>åŠ æŒä¹‹ä¸‹, å¯ç”¨æ€§æ›´æ˜¯é£æ­¥æå‡.</p>
<p>æ¥ç€æ¥çœ‹ä¸€ä¸‹<code>NavLink</code>æ¥æ”¶äº†å“ªäº›<code>props</code>?</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NavLink</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  "aria-current": ariaCurrent = "page",</span></span></span><br><span class="line"><span class="function"><span class="params">  activeClassName = "active",</span></span></span><br><span class="line"><span class="function"><span class="params">  activeStyle,</span></span></span><br><span class="line"><span class="function"><span class="params">  className: classNameProp,</span></span></span><br><span class="line"><span class="function"><span class="params">  exact,</span></span></span><br><span class="line"><span class="function"><span class="params">  isActive: isActiveProp,</span></span></span><br><span class="line"><span class="function"><span class="params">  location,</span></span></span><br><span class="line"><span class="function"><span class="params">  strict,</span></span></span><br><span class="line"><span class="function"><span class="params">  style: styleProp,</span></span></span><br><span class="line"><span class="function"><span class="params">  to,</span></span></span><br><span class="line"><span class="function"><span class="params">  ...rest</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„propsçš„åŠŸèƒ½å¦‚ä¸‹è¡¨æ‰€ç¤º:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>aria-current</td>
<td>æ®‹éšœäººå£«ä¸“ç”¨, å¯å‚è€ƒ<a href="https://www.w3.org/TR/wai-aria-1.1/#aria-current" target="_blank" rel="noopener">è¿™é‡Œ</a></td>
</tr>
<tr>
<td>activeClassName</td>
<td>åŒ¹é…æ—¶æ·»åŠ çš„ç±»å</td>
</tr>
<tr>
<td>activeStyle</td>
<td>åŒ¹é…æ—¶æ·»åŠ çš„æ ·å¼</td>
</tr>
<tr>
<td>className</td>
<td>NavLinkçš„ç±»å, ä¼šé™„åŠ åˆ°Link</td>
</tr>
<tr>
<td>exact</td>
<td>æ˜¯å¦å®è¡Œå®Œå…¨åŒ¹é…</td>
</tr>
<tr>
<td>strict</td>
<td>æ˜¯å¦å®è¡Œä¸¥æ ¼åŒ¹é…</td>
</tr>
<tr>
<td>isActive</td>
<td>è‡ªè¡Œè®¡ç®—é«˜äº®æ¡ä»¶</td>
</tr>
<tr>
<td>location</td>
<td>ä¸å½“å‰<code>to</code>è¿›è¡Œæ¯”è¾ƒçš„location, é»˜è®¤æ˜¯<code>context.location</code></td>
</tr>
<tr>
<td>style</td>
<td>é»˜è®¤æ ·å¼</td>
</tr>
<tr>
<td>to</td>
<td>è·³è½¬çš„url</td>
</tr>
<tr>
<td>â€¦rest</td>
<td>é¢å¤–å‚æ•°</td>
</tr>
</tbody>
</table>
<p>æ¥ç€, å¯ä»¥çœ‹åˆ°ä¸‹é¢:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="keyword">typeof</span> to === <span class="string">"object"</span> ? to.pathname : to;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202</span></span><br><span class="line"><span class="keyword">const</span> escapedPath = path &amp;&amp; path.replace(<span class="regexp">/([.+*?=^!:$&#123;&#125;()[\]|/\\])/g</span>, <span class="string">"\\$1"</span>);</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯, è¿™é‡Œçš„<code>excapedPath</code>å¾ˆå¥‡æ€ª, ä¸€ç›´æƒ³ä¸é€šä¸ºä»€ä¹ˆè¦è¿›è¡Œè¿™ä¸ªæ“ä½œ? æ€€ç€å¥½å¥‡çš„å¿ƒç†ç‚¹å¼€æ³¨é‡Šçš„é“¾æ¥, å¯ä»¥çœ‹åˆ°:</p>
<p><img src="https://oos.blog.yyge.top/2019/2/7/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E5%85%AB%29%20-NavLink/images/1.jpg?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="excapedPath"></p>
<p>è¯¥å‡½æ•°ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰å¤„ç†, é‚£ä¹ˆè¿™åˆ°åº•æœ‰å’©ç”¨? å‡è®¾æœ‰ä¸€ä¸ªç‰¹æ®Šçš„<code>path</code>åºåˆ—æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path: <span class="built_in">string</span> = <span class="string">'/user\duan/profile/se+cr*et'</span>;</span><br></pre></td></tr></table></figure>
<p>ç”¨æˆ·æƒ³ä¼ é€’è¯¥<code>path</code>, è¯¥<code>path</code>ä¸­å«æœ‰ç‰¹æ®Šå­—ç¬¦, é‚£ä¹ˆ<code>escaped</code>ä¼šå°†è½¬ä¹‰å­—ç¬¦å†æ­¤è¿›è¡Œè½¬ä¹‰, ä¾¿äºä¼ é€’.</p>
<p>æ¥ç€å¾€ä¸‹çœ‹:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;Route</span><br><span class="line">    path=&#123;escapedPath&#125;</span><br><span class="line">    exact=&#123;exact&#125;</span><br><span class="line">    strict=&#123;strict&#125;</span><br><span class="line">    location=&#123;location&#125;</span><br><span class="line">    children=&#123;<span class="function">(<span class="params">&#123; location, match &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> isActive = !!(isActiveProp</span><br><span class="line">        ? isActiveProp(match, location)</span><br><span class="line">        : match);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> className = isActive</span><br><span class="line">        ? joinClassnames(classNameProp, activeClassName)</span><br><span class="line">        : classNameProp;</span><br><span class="line">      <span class="keyword">const</span> style = isActive ? &#123; ...styleProp, ...activeStyle &#125; : styleProp;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;Link</span><br><span class="line">          aria-current=&#123;(isActive &amp;&amp; ariaCurrent) || <span class="literal">null</span>&#125;</span><br><span class="line">          className=&#123;className&#125;</span><br><span class="line">          style=&#123;style&#125;</span><br><span class="line">          to=&#123;to&#125;</span><br><span class="line">          &#123;...rest&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸€ä¸ª<code>Route</code>ç»„ä»¶åŒ…è£¹, æ ¹æ®å…¶çš„<code>match</code>åˆ¤æ–­æ˜¯å¦<code>active</code>, ç„¶ååœ¨<code>Route</code>ä¸­è¿”å›å¯¹åº”çš„<code>Link</code>ç»„ä»¶, å°†å¤„ç†åçš„<code>rest</code>ç­‰å‚æ•°ä¼ é€’ç»™<code>Link</code>ç»„ä»¶.</p>
<p>è¿™ä¸€æ­¥, æˆ‘åˆšå¼€å§‹çœ‹äº†å¥½å‡ ééƒ½æ²¡çœ‹æ‡‚, å¾ˆéš¾ç†è§£, éš¾ç‚¹åœ¨äºä¸ºä»€ä¹ˆè¦ç”¨ä¸€ä¸ª<code>Route</code>??? å®ƒçš„æœ¬è´¨æ˜¯ä¸ºäº†è·å–<code>match</code>, æ ¹æ®<code>match</code>åŒ¹é…æˆåŠŸä¸å¦, è¿›è¡ŒåŠ¨æ€æ·»åŠ æ ·å¼, ç†è§£äº†è¿™ç‚¹, å°±æ²¡å•¥å¯è¯´çš„äº†.</p>
<p>å¦å¤–, è¿˜æœ‰ä¸€ç§æ€è·¯ â€”â€” é€šè¿‡è·å–<code>Link</code>çš„<code>innerRef</code>, ç„¶åé€šè¿‡<code>matchPath</code>è‡ªè¡Œæ¯”å¯¹<code>location.pathname === to</code>, æ ¹æ®åˆ¤æ–­çš„ç»“æœ, ç›´æ¥æ“ä½œ<code>DOM</code>, è¿™ä¹ˆåšä¹Ÿæ˜¯å¯ä»¥çš„, ä¸è¿‡å€¼å¾—æ€è€ƒçš„æ˜¯, è¿™ä¸æ­£å¥½è¿èƒŒäº†<code>Route</code>ç»„ä»¶çš„è®¾è®¡åŸåˆ™:</p>
<blockquote>
<p>åŒ¹é…è·¯å¾„è§„åˆ™, æ¸²æŸ“ç»„ä»¶</p>
</blockquote>
<p>æ—¢ç„¶æœ‰æ›´ä¸“ä¸šçš„<code>Route</code>æ¥å¸®æˆ‘ä»¬ä½œè¿™ä»¶äº‹, ä½•ä¹è€Œä¸ä¸ºå‘¢? ä¸ºä»€ä¹ˆè¿˜è¦å†æ¬¡æ¯”å¯¹å‘¢? å¾—ä¸å¿å¤±.</p>
<p>ğŸ†—, <code>NavLink</code>çš„æºç æ€è·¯è§£æå¤§è‡´å·²ç»å®Œæˆ, æ¥ä¸‹æ¥ç»§ç»­å®Œå–„è‡ªå·±çš„<code>yyg-react-router-dom</code>åº“.</p>
<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a><strong>å®è·µ</strong></h2><hr>
<p>è€æ ·å­, é¦–å…ˆå®šä¹‰æˆ‘ä»¬æ‰€éœ€çš„ä¸€åˆ‡<code>props</code>, å…·ä½“çš„<code>props</code>å¯ä»¥çœ‹<a href="https://reacttraining.com/react-router/web/api/NavLink" target="_blank" rel="noopener">è¿™é‡Œ</a>.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/yyg-react-router-dom/components/NavLink.tsx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="keyword">extends</span> React.HtmlHTMLAttributes&lt;HTMLAnchorElement&gt; &#123;</span><br><span class="line">  to: <span class="built_in">string</span> | LocationDescriptorObject&lt;&#123;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span>,</span><br><span class="line">  &#125;&gt;;</span><br><span class="line">  activeClassName?: <span class="built_in">string</span>;</span><br><span class="line">  activeStyle?: React.HtmlHTMLAttributes&lt;HTMLAnchorElement&gt;;</span><br><span class="line">  exact?: <span class="built_in">boolean</span>;</span><br><span class="line">  strict?: <span class="built_in">boolean</span>;</span><br><span class="line">  sensitive?: <span class="built_in">boolean</span>;</span><br><span class="line">  isActive?: (</span><br><span class="line">    data: &#123;</span><br><span class="line">      location: Location,</span><br><span class="line">      match: IStaticMatchParams,</span><br><span class="line">    &#125;,</span><br><span class="line">  ) =&gt; <span class="built_in">boolean</span>;</span><br><span class="line">  location?: Location;</span><br><span class="line">  ariaCurrent?: ARIA_CURRENT;</span><br><span class="line">  children?: React.ReactChild;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€, åˆ°äº†ä¸‹é¢, æ ¹æ®åˆ¤æ–­<code>match</code>æ˜¯å¦ä¸ºnullæ¥æ–­å®špathæ˜¯å¦åŒ¹é…:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  ...</span><br><span class="line">  &lt;Route</span><br><span class="line">    children=&#123;<span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> isActive = !!(p.match);</span><br><span class="line">      <span class="keyword">const</span> activeStyles = isActive ? activeStyle : &#123;&#125;;</span><br><span class="line">      <span class="keyword">const</span> activeClassNames = isActive ? activeClassName : <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;Link</span><br><span class="line">          &#123;...rests&#125;</span><br><span class="line">          to=&#123;path&#125;</span><br><span class="line">          style=&#123;activeStyles&#125;</span><br><span class="line">          className=&#123;activeClassNames&#125;</span><br><span class="line">        &gt;&#123;children&#125;&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">      );</span></span><br><span class="line"><span class="regexp">    &#125;&#125;</span></span><br><span class="line"><span class="regexp">  &gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„! ä¸Šé¢æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹, é‚£å°±æ˜¯<code>Route</code>çš„<code>children</code>å’Œ<code>render</code>æ˜¯ä¸åŒçš„, ä¸¤è€…çš„å…·ä½“å·®åˆ«å¯ä»¥çœ‹<a href="https://blog.yyge.top/2019/02/07/%E8%A7%A3%E6%9E%90Route%E4%B8%AD%E7%9A%84render%E5%92%8Cchildren/">è¿™é‡Œ</a>, æ‰€ä»¥, è¿™é‡Œåªèƒ½ä½¿ç”¨<code>children</code>æ¥æ¸²æŸ“.</p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a><strong>æµ‹è¯•</strong></h2><hr>
<p>å®Œæˆäº†è‡ªå·±çš„<code>yyg-react-router-dom</code>åº“, å¯ä»¥æ¥åšä¸€ä¸ªç®€å•çš„æµ‹è¯•.</p>
<blockquote>
<p>å½“ç„¶, æµ‹è¯•ç”¨ä¾‹æ˜¯éšæ„çš„</p>
</blockquote>
<p>æ‰“å¼€<code>App.tsx</code>, ä¿®æ”¹<code>render</code>ä¸­çš„æµ‹è¯•é€»è¾‘å¦‚ä¸‹:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//src/App.tsx</span></span><br><span class="line">...</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;BrowserRouter&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=&#123;<span class="string">"/test"</span>&#125;</span><br><span class="line">            component=&#123;One&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>BrowserRouter&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">...</span></span><br></pre></td></tr></table></figure>
<p>ç„¶å, åœ¨<code>vscode</code>çš„æŒ‡å¼•ä¸‹, è¿›å…¥<code>One.tsx</code>ç»„ä»¶, åŒæ ·ä¿®æ”¹<code>render</code>ä¸­çš„é€»è¾‘:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Page One&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">      &lt;li&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Link</span></span><br><span class="line"><span class="regexp">          to="/</span>test/home<span class="string">"</span></span><br><span class="line"><span class="string">        &gt;</span></span><br><span class="line"><span class="string">          Home</span></span><br><span class="line"><span class="string">        &lt;/Link&gt;</span></span><br><span class="line"><span class="string">      &lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;</span></span><br><span class="line"><span class="string">        &lt;NavLink</span></span><br><span class="line"><span class="string">          to=&#123;&#123;</span></span><br><span class="line"><span class="string">            pathname: '/test/product',</span></span><br><span class="line"><span class="string">            state: &#123;</span></span><br><span class="line"><span class="string">              id: '19980808',</span></span><br><span class="line"><span class="string">              name: 'duan',</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">          &#125;&#125;</span></span><br><span class="line"><span class="string">          activeStyle=&#123;&#123;</span></span><br><span class="line"><span class="string">            color: 'red',</span></span><br><span class="line"><span class="string">          &#125;&#125;</span></span><br><span class="line"><span class="string">        &gt;Product&lt;/NavLink&gt;</span></span><br><span class="line"><span class="string">      &lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;</span></span><br><span class="line"><span class="string">        &lt;NavLink</span></span><br><span class="line"><span class="string">          to="</span>/test/contact<span class="string">"</span></span><br><span class="line"><span class="string">          activeStyle=&#123;&#123;</span></span><br><span class="line"><span class="string">            color: 'red',</span></span><br><span class="line"><span class="string">          &#125;&#125;</span></span><br><span class="line"><span class="string">        &gt;</span></span><br><span class="line"><span class="string">          Contact</span></span><br><span class="line"><span class="string">      &lt;/NavLink&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;Two render=&#123;(&#123; point &#125;) =&gt; (</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;&#123;point.x&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;&#123;point.y&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )&#125; /&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;Route exact path="</span>/test/home<span class="string">" component=&#123;Three&#125; /&gt;</span></span><br><span class="line"><span class="string">      &lt;Route exact path="</span>/test/product<span class="string">" component=&#123;Four&#125; /&gt;</span></span><br><span class="line"><span class="string">      &lt;Route exact path="</span>/test/contact<span class="string">" component=&#123;Five&#125; /&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">);</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°, æ€»å…±æœ‰ä¸‰ä¸ª<code>é”šç‚¹</code>, ç¬¬ä¸€ä¸ªä¸º<code>Link</code>, ä¸ºäº†ä¸<code>NavLink</code>çš„æ•ˆæœåŠ ä»¥åŒºåˆ†, ç„¶ååœ¨æœ€ä¸‹æ–¹æ”¾ç½®éœ€è¦<code>router-view</code>, ä¹Ÿå°±æ˜¯éœ€è¦æ¸²æŸ“çš„ç»„ä»¶. å¤§è‡´ç»“æ„ä¸åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„å·®ä¸å¤šçš„â€¦</p>
<p>æ¥ç€, åœ¨æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°æ•ˆæœ:</p>
<p><img src="https://oos.blog.yyge.top/2019/2/7/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E5%85%AB%29%20-NavLink/images/2.gif?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="æµ‹è¯•NavLink"></p>
<p>ç‚¹å‡»<code>Home</code>æŒ‰é’®, è§†å›¾å˜äº†, ä½†æ˜¯é“¾æ¥é¢œè‰²æ²¡å˜åŒ–? å½“ç„¶äº†, å› ä¸ºè¿™åªæ˜¯æ™®é€šçš„<code>Link</code>ç»„ä»¶, ä½ æƒ³å®ƒæœ‰å•¥æ•ˆæœ? æ¥ç€çœ‹ä¸‹é¢ä¸¤ä¸ª, prefect, ä¸¤ä¸ªé”šç‚¹æ ·å¼éšç€urlå˜åŒ–è€Œæ”¹å˜.</p>
<p>æ­¤æ—¶, å¯¹äº<code>NavLink</code>çš„æµ‹è¯•å·¥ä½œå·²ç»å®Œç¾ç»“æŸäº†</p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a><strong>æºç </strong></h2><hr>
<p>æºç å·²ä¸Šä¼ , ç‚¹<a href="https://github.com/ddzy/yyg-react-router-dom" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote>
<p>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®, å¾å¿…åå¤æ±‚å…¶çŸ¥</p>
</blockquote>
<p>æœ€å, ä¸€å¼ æ€ç»´è„‘å›¾æ¥ç»“æŸä»Šå¤©çš„æºç å­¦ä¹ </p>
<p><img src="https://oos.blog.yyge.top/2019/2/7/react-router-dom%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%28%E5%85%AB%29%20-NavLink/images/3.jpg?imageView2/0/q/75|watermark/2/text/6Ziz5ZOl5bCP56uZ/font/5b6u6L2v6ZuF6buR/fontsize/440/fill/IzE4OTBGRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim" alt="NavLinkæ€ç»´å›¾è§£"></p>

      
    
    </div>
    
      

      
  <hr class="copy-line">
  <div class="post-copyright">
    <div class="copy-author">
      <span>ä½œè€… :</span>
      <span>zhaoyang Duan</span>
    </div>
    <div class="copy-url">
      <span>åœ°å€ :</span>
      <a href="https://blog.yyge.top/2019/02/07/react-router-domæºç è§£æ-å…«-NavLink/">https://blog.yyge.top/2019/02/07/react-router-domæºç è§£æ-å…«-NavLink/</a>
    </div>
    <div class="copy-origin">
      <span>æ¥æº :</span>
      <a href="https://blog.yyge.top">https://blog.yyge.top</a>
    </div>
    <div class="copy-license">
      
      è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚
    </div>
  </div>

    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/2019/02/07/react-routerä¸­match-urlå’Œmatch-pathçš„åŒºåˆ†/" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>react-routerä¸­match.urlå’Œmatch.pathçš„åŒºåˆ†
        </span>
      </a>
    
    
      <a href="/2019/02/05/react-router-domæºç è§£æ-ä¸ƒ-Link/" id="art-right" class="art-right">
        <span class="prev-title"> 
          react-router-domæºç è§£æ(ä¸ƒ) -Link<i class="iconfont icon-right"></i>  
        </span>
      </a>
    
  </nav>

    
  <i id="com-switch" class="iconfont icon-more jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
  <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
    
    
    

    

  </div>



  
  


        </div>
      </main>

      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
    
    
    
    
    
    
    
    
    
        
        
        
        
            <a href="https://www.zhihu.com/people/bu-jing-tong-jsbu-zhao-dui-xiang-81/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
        
        
        
        
    
        
            <a href="https://github.com/ddzy" class="iconfont icon-social-github" title="github"></a>
        
        
        
        
        
        
        
        
    
</div>

    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2018 ~ 2019</span>
        <span>â¤</span>
        <span>zhaoyang Duan</span>
    </div>
    <div class="theme">
        <span>
            åŠ¨åŠ›æ¥æºäº
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            ä¸»é¢˜
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <span id="busuanzi_container_site_pv">
            æœ¬ç«™æ€»è®¿é—®é‡:
            <span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
    </div>
    
</div>

    </div>
  </div>
</footer>
    </div>
  </div>
  <script src="/script/lib/jquery/jquery-3.2.1.min.js"></script>


  <script src="/script/lib/lightbox/js/lightbox.min.js"></script>



  <script src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({tex2jax: {inlineMath: [["$","$"], ["\\(","\\)"]]}});</script>



  <script src="/script/lib/lazyload/lazyload.min.js"></script>




<script src="/script/src/nlvi.js"></script>

  <script src="/script/scheme/balance.js"></script>

<script src="/script/bootstarp.js"></script>


<div class="backtop syuanpi melt toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>



</body>
</html>
